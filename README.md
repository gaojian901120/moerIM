# moerIM
整体架构：
1、接入层 用户每次开启一个新的会话的时候第一次连接该接入服务器，服务器返回给用户一个可用的提供TM通信服务的服务节点地址。 最前端通过vip提供高可用
2、服务层 提供IM服务，为了提高性能，合理利用本地缓存，在服务节点稳定的情况下，同一个用户只会连接同一个节点。
    同时服务层集群内部 互为主备。当主节点不可用的时候，请求转发到备用节点，当备用节点也不可用的时候，进行rehash重新生成转发规则。转发规则的同步和维护由接入层维护
3、zookeeper 监控服务层每个节点的活跃情况，当节点不可用的时候，通知接入层的服务节点，调整请求的转发规则。用户后续的请求则转发到新的IM服务节点上
